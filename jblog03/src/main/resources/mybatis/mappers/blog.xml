<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 쿼리랑 매핑  넴스페이스는 쿼리 구분 -->
<mapper namespace="blog">


	<insert id="insert" parameterType = "blogvo">
		insert into blog values(#{title}, #{logo}, #{user_id} , '${name}입니다')
	</insert>
	

	<select id="findByNo" parameterType = "long" resultType="uservo">
	<![CDATA[
		select name, email, gender from user where no = #{no}
	]]>
	</select>

	
	
	<select id="findByEmailAndPassword" parameterType = "map" resultType="uservo">
	<![CDATA[
		select no, name, role from user where email= #{e} and password = #{p}
	]]>
	</select>


	<update id="update" parameterType = "uservo">
		<choose>
			<when test = "password == null || '' == password">
				<![CDATA[
					update user set name = #{name} , gender = #{gender} where no= #{no}
				]]>
			</when>
			<otherwise>
				<![CDATA[
					update user set name = #{name} , password = #{password}, gender = #{gender} where no= #{no}
				]]>
			</otherwise>
		</choose>
	</update>	
	
	
</mapper>
